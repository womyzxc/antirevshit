<script>document.write(decodeURIComponent(escape(atob("PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgPHRpdGxlPkB3b215PC90aXRsZT4KCiAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJwbmciIGhyZWY9Imh0dHBzOi8vZmlsZS5nYXJkZW4vYVJIWHo4RV9UZ2xIVDk1Yy9wcmltby5wbmciPgoKICA8c3R5bGU+CiAgICA6cm9vdCB7CiAgICAgIC0tYmc6IHVybCgnaHR0cHM6Ly9pLmltZ3VyLmNvbS8zQWxiWG10LmdpZicpOwogICAgICAtLXBmcDogdXJsKCdodHRwczovL2ZpbGUuZ2FyZGVuL2FSSFh6OEVfVGdsSFQ5NWMvcHJpbW8ucG5nJyk7CiAgICAgIC0tc2NhbGU6IDEuMjU7CiAgICAgIC0tYmx1cjogY2FsYygxMnB4ICogdmFyKC0tc2NhbGUpKTsKICAgICAgLS10ZXh0OiAjZmZmZmZmOwogICAgICAtLW9ubGluZTogIzQzYjU4MTsKICAgICAgLS1pZGxlOiAjZmFhNjFhOwogICAgICAtLWRuZDogI2YwNDc0NzsKICAgICAgLS1vZmZsaW5lOiAjNzQ3ZjhkOwogICAgICAtLXNwb3RpZnk6ICMxZGI5NTQ7CiAgICB9CgogICAgLmxpZ2h0LXRoZW1lIHsKICAgICAgLS1iZzogI2YwZjBmMDsKICAgICAgLS10ZXh0OiAjMzMzMzMzOwogICAgfQoKICAgIGh0bWwsIGJvZHkgeyAKICAgICAgaGVpZ2h0OiAxMDAlOyAKICAgICAgc2Nyb2xsLWJlaGF2aW9yOiBzbW9vdGg7CiAgICB9CiAgICAKICAgIGJvZHkgeyAKICAgICAgbWFyZ2luOiAwOyAKICAgICAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWw7IAogICAgICBjb2xvcjogdmFyKC0tdGV4dCk7IAogICAgICBiYWNrZ3JvdW5kOiAjMDAwOyAKICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB9CgogICAgI3N0YXJ0U2NyZWVuIHsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICBpbnNldDogMDsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjg4KTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIHotaW5kZXg6IDk5OTk7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAuNnMgZWFzZTsKICAgIH0KICAgICNzdGFydFNjcmVlbi5oaWRkZW4gewogICAgICBvcGFjaXR5OiAwOwogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgIH0KICAgIC5zdGFydFRleHQgewogICAgICBmb250LXNpemU6IDMycHg7CiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgIGxldHRlci1zcGFjaW5nOiAycHg7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgYW5pbWF0aW9uOiBwdWxzZSAxLjhzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogICAgfQogICAgQGtleWZyYW1lcyBwdWxzZSB7CiAgICAgIDAlIHsgb3BhY2l0eTogLjU1OyB9CiAgICAgIDUwJSB7IG9wYWNpdHk6IDE7IH0KICAgICAgMTAwJSB7IG9wYWNpdHk6IC41NTsgfQogICAgfQoKICAgIC5iZyB7IAogICAgICBwb3NpdGlvbjogZml4ZWQ7IAogICAgICBpbnNldDogMDsgCiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWJnKTsgCiAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7IAogICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7IAogICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgICBmaWx0ZXI6IGJsdXIodmFyKC0tYmx1cikpOyAKICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA2KTsgCiAgICAgIHotaW5kZXg6IDA7IAogICAgfQogICAgLmRpbSB7IHBvc2l0aW9uOiBmaXhlZDsgaW5zZXQ6IDA7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4zNSk7IHotaW5kZXg6IDE7IH0KICAgICNmeCB7IHBvc2l0aW9uOiBmaXhlZDsgaW5zZXQ6IDA7IHotaW5kZXg6IDI7IHBvaW50ZXItZXZlbnRzOiBub25lOyB9CiAgICAud3JhcCB7IAogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7IAogICAgICBtaW4taGVpZ2h0OiAxMDAlOyAKICAgICAgZGlzcGxheTogZ3JpZDsgCiAgICAgIHBsYWNlLWl0ZW1zOiBjZW50ZXI7IAogICAgICB6LWluZGV4OiAzOyAKICAgIH0KICAgIC5jb250ZW50IHsgCiAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgCiAgICAgIGdhcDogY2FsYyg4cHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAKICAgICAgcGFkZGluZzogY2FsYygyNHB4ICogdmFyKC0tc2NhbGUpKTsgCiAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgICB9CiAgICAubG9nb3MgeyAKICAgICAgZGlzcGxheTogZmxleDsgCiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgCiAgICAgIGdhcDogY2FsYygxMHB4ICogdmFyKC0tc2NhbGUpKTsgCiAgICAgIG1hcmdpbi10b3A6IGNhbGMoNHB4ICogdmFyKC0tc2NhbGUpKTsgCiAgICB9CiAgICAubG9nb3MgaW1nIHsgCiAgICAgIHdpZHRoOiBjYWxjKDI4cHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgaGVpZ2h0OiBjYWxjKDI4cHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsgCiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7CiAgICB9CiAgICAubG9nb3MgaW1nOmhvdmVyIHsKICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjIpIHJvdGF0ZSgxMGRlZyk7CiAgICB9CiAgICAuc29jaWFsIHsgCiAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IAogICAgICBnYXA6IGNhbGMoMTJweCAqIHZhcigtLXNjYWxlKSk7IAogICAgICBtYXJnaW4tdG9wOiBjYWxjKDEwcHggKiB2YXIoLS1zY2FsZSkpOyAKICAgIH0KICAgIC5zb2NpYWwgYSB7IAogICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsgCiAgICAgIHdpZHRoOiBjYWxjKDMwcHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgaGVpZ2h0OiBjYWxjKDMwcHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgCiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAKICAgICAgYm9yZGVyLXJhZGl1czogOHB4OyAKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4xOHMgZWFzZSwgZmlsdGVyIC4xOHMgZWFzZTsgCiAgICB9CiAgICAuc29jaWFsIGE6aG92ZXIgeyAKICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEyKTsgCiAgICAgIGZpbHRlcjogYnJpZ2h0bmVzcygxLjA4KTsgCiAgICB9CiAgICAuc29jaWFsIGltZyB7IAogICAgICB3aWR0aDogMTAwJTsgCiAgICAgIGhlaWdodDogMTAwJTsgCiAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47IAogICAgICBkaXNwbGF5OiBibG9jazsgCiAgICB9CiAgICAKICAgIC5wZnAtY29udGFpbmVyIHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICBiYWNrZ3JvdW5kOiBjb25pYy1ncmFkaWVudCgKICAgICAgICBmcm9tIDBkZWcsIAogICAgICAgICNmZjAwMDAsIAogICAgICAgICNmZjk5MDAsIAogICAgICAgICNmZmZmMDAsIAogICAgICAgICMwMGZmMDAsIAogICAgICAgICMwMGZmZmYsIAogICAgICAgICMwMDAwZmYsIAogICAgICAgICM5OTAwZmYsIAogICAgICAgICNmZjAwZmYsIAogICAgICAgICNmZjAwMDAKICAgICAgKTsKICAgICAgYmFja2dyb3VuZC1zaXplOiA0MDAlIDQwMCU7CiAgICAgIGFuaW1hdGlvbjogYm9yZGVyQW5pbWF0aW9uIDRzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsKICAgIH0KICAgIAogICAgLnBmcC1jb250YWluZXI6aG92ZXIgewogICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwogICAgfQogICAgCiAgICBAa2V5ZnJhbWVzIGJvcmRlckFuaW1hdGlvbiB7CiAgICAgIDAlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCUgNTAlOyB9CiAgICAgIDUwJSB7IGJhY2tncm91bmQtcG9zaXRpb246IDEwMCUgNTAlOyB9CiAgICAgIDEwMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCU7IH0KICAgIH0KICAgIAogICAgLnBmcCB7CiAgICAgIHdpZHRoOiBjYWxjKDEyMHB4ICogdmFyKC0tc2NhbGUpKTsKICAgICAgaGVpZ2h0OiBjYWxjKDEyMHB4ICogdmFyKC0tc2NhbGUpKTsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICBiYWNrZ3JvdW5kLWltYWdlOiB2YXIoLS1wZnApOwogICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjM1KTsKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4yNXMgZWFzZSwgZmlsdGVyIC4yNXMgZWFzZTsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICB6LWluZGV4OiAxOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB9CiAgICAKICAgIC5wZnA6aG92ZXIgewogICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7CiAgICAgIGZpbHRlcjogYnJpZ2h0bmVzcygxLjA1KTsKICAgIH0KICAgIAogICAgLnN0YXR1cy1pbmRpY2F0b3IgewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIGJvdHRvbTogOHB4OwogICAgICByaWdodDogOHB4OwogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgIGJvcmRlcjogM3B4IHNvbGlkICMwMDA7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW9mZmxpbmUpOwogICAgICBkaXNwbGF5OiBub25lOwogICAgICB6LWluZGV4OiAyOwogICAgfQogICAgCiAgICAubmFtZSB7CiAgICAgIGZvbnQtc2l6ZTogY2FsYygyOHB4ICogdmFyKC0tc2NhbGUpKTsKICAgICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgICAgbGV0dGVyLXNwYWNpbmc6IC4ycHg7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIH0KICAgIAogICAgLm5hbWUgLmxhYmVsIHsKICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjZmZmZmZmIDAlLCAjZDlkOWQ5IDUwJSwgI2ZmZmZmZiAxMDAlKTsKICAgICAgYmFja2dyb3VuZC1zaXplOiAyMDAlIDIwMCU7CiAgICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgIGFuaW1hdGlvbjogbmFtZVBvcCAuNXMgZWFzZS1vdXQgYm90aCwgbmFtZUdyYWRpZW50IDZzIGVhc2UtaW4tb3V0IGluZmluaXRlOwogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgei1pbmRleDogMTsKICAgIH0KICAgIAogICAgLm5hbWUgLmdsb3cgewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIGxlZnQ6IDA7CiAgICAgIHRvcDogMDsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgIG9wYWNpdHk6IC44NTsKICAgICAgdGV4dC1zaGFkb3c6IDAgMCBjYWxjKDNweCAqIHZhcigtLXNjYWxlKSkgcmdiYSgyNTUsMjU1LDI1NSwuNTUpLCAKICAgICAgICAgICAgICAgICAgIDAgMCBjYWxjKDhweCAqIHZhcigtLXNjYWxlKSkgcmdiYSgyNTUsMjU1LDI1NSwuNCksIAogICAgICAgICAgICAgICAgICAgMCAwIGNhbGMoMTZweCAqIHZhcigtLXNjYWxlKSkgcmdiYSgyNTUsMjU1LDI1NSwuMyk7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICB6LWluZGV4OiAwOwogICAgICBhbmltYXRpb246IGdsb3dQdWxzZSA1cyBlYXNlLWluLW91dCBpbmZpbml0ZTsKICAgIH0KICAgIAogICAgQGtleWZyYW1lcyBnbG93UHVsc2UgewogICAgICAwJSB7IG9wYWNpdHk6IC43NSB9CiAgICAgIDUwJSB7IG9wYWNpdHk6IDEgfQogICAgICAxMDAlIHsgb3BhY2l0eTogLjc1IH0KICAgIH0KICAgIAogICAgQGtleWZyYW1lcyBuYW1lUG9wIHsKICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNnB4KSBzY2FsZSguOTgpIH0KICAgICAgMTAwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKSBzY2FsZSgxKSB9CiAgICB9CiAgICAKICAgIEBrZXlmcmFtZXMgbmFtZUdyYWRpZW50IHsKICAgICAgMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCUgfQogICAgICA1MCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAxMDAlIDUwJSB9CiAgICAgIDEwMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCUgfQogICAgfQogICAgCiAgICAudHlwZXdyaXRlci1jb250YWluZXIgewogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIGhlaWdodDogMjRweDsKICAgICAgbWFyZ2luOiA4cHggMDsKICAgIH0KICAgIAogICAgLnR5cGV3cml0ZXItdGV4dCB7CiAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgIGZvbnQtc2l6ZTogY2FsYygxNHB4ICogdmFyKC0tc2NhbGUpKTsKICAgICAgY29sb3I6ICNjZmNmZTY7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgIGJvcmRlci1yaWdodDogLjE1ZW0gc29saWQgb3JhbmdlOwogICAgICBhbmltYXRpb246IAogICAgICAgIHR5cGluZyA0cyBzdGVwcygxMywgZW5kKSBpbmZpbml0ZSwKICAgICAgICBibGluay1jYXJldCAuNzVzIHN0ZXAtZW5kIGluZmluaXRlOwogICAgfQogICAgCiAgICAuc3RhdHVzIHsKICAgICAgbWFyZ2luLXRvcDogY2FsYyg2cHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgZm9udC1zaXplOiBjYWxjKDEycHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgY29sb3I6ICNiZGJkZTA7IAogICAgICB0ZXh0LXNoYWRvdzogMCAwIDJweCByZ2JhKDI1NSwyNTUsMjU1LC40NSksIDAgMCA2cHggcmdiYSgyNTUsMjU1LDI1NSwuMjUpOwogICAgfQogICAgCiAgICBAa2V5ZnJhbWVzIHR5cGluZyB7CiAgICAgIDAlIHsgd2lkdGg6IDAgfQogICAgICA1MCUgeyB3aWR0aDogMTAwJSB9CiAgICAgIDEwMCUgeyB3aWR0aDogMCB9CiAgICB9CiAgICAKICAgIEBrZXlmcmFtZXMgYmxpbmstY2FyZXQgewogICAgICBmcm9tLCB0byB7IGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgfQogICAgICA1MCUgeyBib3JkZXItY29sb3I6IG9yYW5nZTsgfQogICAgfQogICAgCiAgICAuYWN0aXZpdHkgeyAKICAgICAgbWFyZ2luLXRvcDogY2FsYyg4cHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgZm9udC1zaXplOiBjYWxjKDEzcHggKiB2YXIoLS1zY2FsZSkpOyAKICAgICAgY29sb3I6ICNiZGJkZTA7IAogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMyk7IAogICAgICBwYWRkaW5nOiA4cHggMTJweDsgCiAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsgCiAgICAgIG1heC13aWR0aDogMzAwcHg7IAogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICAKICAgIC5hY3Rpdml0eS5zaG93IHsgZGlzcGxheTogYmxvY2s7IH0KICAgIC5hY3Rpdml0eS5zcG90aWZ5IHsKICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1zcG90aWZ5KTsKICAgIH0KICAgIC5hY3Rpdml0eS5wbGF5aW5nIHsKICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1vbmxpbmUpOwogICAgfQogICAgCiAgICBAa2V5ZnJhbWVzIGJsb29tUHVsc2UgewogICAgICAwJSB7IHRleHQtc2hhZG93OiAwIDAgMnB4IHJnYmEoMjU1LDI1NSwyNTUsLjM1KSB9CiAgICAgIDUwJSB7IHRleHQtc2hhZG93OiAwIDAgNHB4IHJnYmEoMjU1LDI1NSwyNTUsLjYpIH0KICAgICAgMTAwJSB7IHRleHQtc2hhZG93OiAwIDAgMnB4IHJnYmEoMjU1LDI1NSwyNTUsLjM1KSB9CiAgICB9CiAgICAKICAgIC50aGVtZS10b2dnbGUgewogICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgIHRvcDogMjBweDsKICAgICAgcmlnaHQ6IDIwcHg7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgIHdpZHRoOiA0MHB4OwogICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgei1pbmRleDogMTAwMDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgICB9CiAgICAKICAgIC50aGVtZS10b2dnbGU6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE1ZGVnKTsKICAgIH0KICAgIAogICAgLnRoZW1lLXRvZ2dsZSBzdmcgewogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBmaWxsOiB2YXIoLS10ZXh0KTsKICAgIH0KICAgIAogICAgLnZpc2l0b3ItY291bnRlciB7CiAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6ICNiZGJkZTA7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgICB9CiAgICAKICAgIC5zZWFzb25hbC1kZWNvcmF0aW9uIHsKICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgei1pbmRleDogMDsKICAgIH0KICAgIAogICAgLmNyYWNrLW92ZXJsYXkgewogICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgIHRvcDogMDsKICAgICAgbGVmdDogMDsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIHotaW5kZXg6IDk5OTg7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICBvcGFjaXR5OiAwOwogICAgfQogICAgCiAgICAuY3JhY2sgewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyOwogICAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICB9CiAgICAKICAgIC53YXJuaW5nLW92ZXJsYXkgewogICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgIHRvcDogMDsKICAgICAgbGVmdDogMDsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjkpOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgei1pbmRleDogMTAwMDA7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBwYWRkaW5nOiAyMHB4OwogICAgfQogICAgCiAgICAud2FybmluZy1vdmVybGF5IGgyIHsKICAgICAgY29sb3I6ICNmZjU1NTU7CiAgICAgIGZvbnQtc2l6ZTogMi41cmVtOwogICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgICBsZXR0ZXItc3BhY2luZzogM3B4OwogICAgfQogICAgCiAgICAud2FybmluZy1vdmVybGF5IHAgewogICAgICBmb250LXNpemU6IDEuMnJlbTsKICAgICAgbWF4LXdpZHRoOiA2MDBweDsKICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgIH0KICAgIAogICAgLndhcm5pbmctb3ZlcmxheSBidXR0b24gewogICAgICBiYWNrZ3JvdW5kOiAjZmY1NTU1OwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgcGFkZGluZzogMTJweCAzMHB4OwogICAgICBmb250LXNpemU6IDEuMXJlbTsKICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4zczsKICAgIH0KICAgIAogICAgLndhcm5pbmctb3ZlcmxheSBidXR0b246aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjZmYwMDAwOwogICAgfQogICAgCiAgICBAbWVkaWEgKG1heC13aWR0aDogNDIwcHgpIHsgCiAgICAgIC5wZnAgeyB3aWR0aDogY2FsYyg5NnB4ICogdmFyKC0tc2NhbGUpKTsgaGVpZ2h0OiBjYWxjKDk2cHggKiB2YXIoLS1zY2FsZSkpOyB9IAogICAgICAubmFtZSB7IGZvbnQtc2l6ZTogY2FsYygyNHB4ICogdmFyKC0tc2NhbGUpKTsgfSAKICAgIH0KICA8L3N0eWxlPgoKICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20iIGNyb3Nzb3JpZ2luPgogIDxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSI+CiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIj4KPC9oZWFkPgoKPGJvZHk+CgogIDxidXR0b24gY2xhc3M9InRoZW1lLXRvZ2dsZSIgaWQ9InRoZW1lVG9nZ2xlIiBhcmlhLWxhYmVsPSJUb2dnbGUgdGhlbWUiPgogICAgPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgICA8cGF0aCBkPSJNMTIsOWMxLjY1LDAsMywxLjM1LDMsM3MtMS4zNSwzLTMsM3MtMy0xLjM1LTMtM1MxMC4zNSw5LDEyLDkgTTEyLDdjLTIuNzYsMC01LDIuMjQtNSw1czIuMjQsNSw1LDVzNS0yLjI0LDUtNSBTMTQuNzYsNywxMiw3TDEyLDd6IE0yLDEzbDIsMGMwLjU1LDAsMS0wLjQ1LDEtMXMtMC40NS0xLTEtMWwtMiwwYy0wLjU1LDAtMSwwLjQ1LTEsMVMxLjQ1LDEzLDIsMTN6IE0yMCwxM2wyLDBjMC41NSwwLDEtMC40NSwxLTEgcy0wLjQ1LTEtMS0xbC0yLDBjLTAuNTUsMC0xLDAuNDUtMSwxUzE5LjQ1LDEzLDIwLDEzeiBNMTEsMnYyYzAsMC41NSwwLjQ1LDEsMSwxczEtMC40NSwxLTFWMmMwLTAuNTUtMC40NS0xLTEtMVMxMSwxLjQ1LDExLDJ6IE0xMSwyMHYyYzAsMC41NSwwLjQ1LDEsMSwxczEtMC40NSwxLTF2LTJjMC0wLjU1LTAuNDUtMS0xLTFDMTEuNDUsMTksMTEsMTkuNDUsMTEsMjB6IE01Ljk5LDQuNThjLTAuMzktMC4zOS0xLjAzLTAuMzktMS40MSwwIGMtMC4zOSwwLjM5LTAuMzksMS4wMywwLDEuNDFsMS4wNiwxLjA2YzAuMzksMC4zOSwxLjAzLDAuMzksMS40MSwwczAuMzktMS4wMywwLTEuNDFMNS45OSw0LjU4eiBNMTguMzYsMTYuOTUgYy0wLjM5LTAuMzktMS4wMy0wLjM5LTEuNDEsMGMtMC4zOSwwLjM5LTAuMzksMS4wMywwLDEuNDFsMS4wNiwxLjA2YzAuMzksMC4zOSwxLjAzLDAuMzksMS40MSwwYzAuMzktMC4zOSwwLjM5LTEuMDMsMC0xLjQxIEwxOC4zNiwxNi45NXogTTE5LjQyLDUuOTljMC4zOS0wLjM5LDAuMzktMS4wMywwLTEuNDFjLTAuMzktMC4zOS0xLjAzLTAuMzktMS40MSwwbC0xLjA2LDEuMDZjLTAuMzksMC4zOS0wLjM5LDEuMDMsMCwxLjQxIHMxLjAzLDAuMzksMS40MSwwTDE5LjQyLDUuOTl6IE03LjA1LDE4LjM2YzAuMzktMC4zOSwwLjM5LTEuMDMsMC0xLjQxYy0wLjM5LTAuMzktMS4wMy0wLjM5LTEuNDEsMGwtMS4wNiwxLjA2IGMtMC4zOSwwLjM5LTAuMzksMS4wMywwLDEuNDFzMS4wMywwLjM5LDEuNDEsMEw3LjA1LDE4LjM2eiI+PC9wYXRoPgogICAgPC9zdmc+CiAgPC9idXR0b24+CgogIDxhdWRpbyBpZD0iYmdNdXNpYyIgbG9vcCBwcmVsb2FkPSJhdXRvIgogICAgc3JjPSJodHRwczovL2ZpbGUuZ2FyZGVuL2FUNDBZcnlieFd2RnA2S3cvcmV2cmV2Lm1wMyI+CiAgPC9hdWRpbz4KCiAgPGRpdiBpZD0ic3RhcnRTY3JlZW4iPgogICAgPGRpdiBjbGFzcz0ic3RhcnRUZXh0Ij5OSUdHRVJTPC9kaXY+CiAgPC9kaXY+CgogIDxkaXYgY2xhc3M9ImNyYWNrLW92ZXJsYXkiIGlkPSJjcmFja092ZXJsYXkiPjwvZGl2PgoKICA8ZGl2IGNsYXNzPSJ3YXJuaW5nLW92ZXJsYXkiIGlkPSJ3YXJuaW5nT3ZlcmxheSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgIDxoMj5CQVdBTCBZQU4gQk9TUzwvaDI+CiAgICA8cD5HYWxpbmdhbiBtbyBsYW5nIGJvaSEuPC9wPgogICAgPGJ1dHRvbiBpZD0iY2xvc2VXYXJuaW5nIj5UQU5HQSBBS08gR0VUUyBLTzwvYnV0dG9uPgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJiZyI+PC9kaXY+CiAgPGRpdiBjbGFzcz0iZGltIj48L2Rpdj4KICA8Y2FudmFzIGlkPSJmeCI+PC9jYW52YXM+CgogIDxtYWluIGNsYXNzPSJ3cmFwIj4KICAgIDxzZWN0aW9uIGNsYXNzPSJjb250ZW50IiBhcmlhLWxhYmVsPSJQcm9maWxlIGNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJwZnAtY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJwZnAiIGlkPSJwcm9maWxlUGljdHVyZSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHVzLWluZGljYXRvciI+PC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJuYW1lIj48c3BhbiBjbGFzcz0ibGFiZWwiPndvbXk8L3NwYW4+PHNwYW4gYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJnbG93Ij53b215PC9zcGFuPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJsb2dvcyI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2Vtb2ppcy8xMDk1MDI1OTM2NTk4MDQ4NzY5LndlYnA/c2l6ZT05NiZhbmltYXRlZD10cnVlIiBhbHQ9ImxvZ28tMSI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2Vtb2ppcy8xMzY0NzYxNDI2MjQ5Mzg4MTczLndlYnA/c2l6ZT05NiZhbmltYXRlZD10cnVlIiBhbHQ9ImxvZ28tMiI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2Vtb2ppcy8xNDQ4MTg2MTk3ODEyNzA3NDM4LndlYnA/c2l6ZT05NiZhbmltYXRlZD10cnVlIiBhbHQ9ImxvZ28tMyI+CiAgICAgIDwvZGl2PgogICAgICAKICAgICAgPGRpdiBjbGFzcz0idHlwZXdyaXRlci1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InR5cGV3cml0ZXItdGV4dCI+UGVhY2UgT3ZlciBXYXI8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIAogICAgICA8ZGl2IGNsYXNzPSJzdGF0dXMiPkFudGkgUmV2c2hpdDwvZGl2PgogICAgICAKICAgICAgPGRpdiBjbGFzcz0idmlzaXRvci1jb3VudGVyIj5WaXNpdG9yczogPHNwYW4gaWQ9InZpc2l0b3JDb3VudCI+MDwvc3Bhbj48L2Rpdj4KICAgICAgCiAgICAgIDxkaXYgY2xhc3M9ImFjdGl2aXR5Ij48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic29jaWFsIiBhcmlhLWxhYmVsPSJzb2NpYWwgbGlua3MiPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZGFwcC5jb20vdXNlcnMvMTE4NDQ1NDY4Nzg2NTQzODIxOCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgYXJpYS1sYWJlbD0iRGlzY29yZCI+CiAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4uc2ltcGxlaWNvbnMub3JnL2Rpc2NvcmQvZmZmZmZmIiBhbHQ9IkRpc2NvcmQiPgogICAgICAgIDwvYT4KICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL3dvbXkuenhjLyIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgYXJpYS1sYWJlbD0iSW5zdGFncmFtIj4KICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi5zaW1wbGVpY29ucy5vcmcvaW5zdGFncmFtL2ZmZmZmZiIgYWx0PSJJbnN0YWdyYW0iPgogICAgICAgIDwvYT4KICAgICAgICA8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vd29teXp4YyIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgYXJpYS1sYWJlbD0iR2l0aHViIj4KICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi5zaW1wbGVpY29ucy5vcmcvZ2l0aHViL2ZmZmZmZiIgYWx0PSJHaXRodWIiPgogICAgICAgIDwvYT4KICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9Ad29teXh5eiIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciIgYXJpYS1sYWJlbD0iWW91dHViZSI+CiAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4uc2ltcGxlaWNvbnMub3JnL3lvdXR1YmUvZmZmZmZmIiBhbHQ9IllvdXR1YmUiPiAgICAgICAgICAKICAgICAgICA8L2E+CiAgICAgIDwvZGl2PgogICAgPC9zZWN0aW9uPgogIDwvbWFpbj4KCiAgPHNjcmlwdD4KICAgIGNvbnN0IHVzZXJJZCA9ICcxMTg0NDU0Njg3ODY1NDM4MjE4JzsgCiAgICBjb25zdCBzdGF0dXNJbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhdHVzLWluZGljYXRvcicpOwogICAgY29uc3QgYWN0aXZpdHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpdml0eScpOwogICAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hbWUgLmxhYmVsJyk7CiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZngnKTsKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgY29uc3QgU0NBTEUgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCctLXNjYWxlJykpIHx8IDE7CgogICAgY29uc3QgYmFja2dyb3VuZEltYWdlcyA9IFsKICAgICAgJ2h0dHBzOi8vaS5pbWd1ci5jb20vM0FsYlhtdC5naWYnLAogICAgICAnaHR0cHM6Ly9pLmltZ3VyLmNvbS85VllkcVFZLmdpZicsCiAgICAgICdodHRwczovL2kuaW1ndXIuY29tL0NiVmpsQXouZ2lmJywKICAgICAgJ2h0dHBzOi8vaS5pbWd1ci5jb20vaFpGaUt2Ni5naWYnLAogICAgICAnaHR0cHM6Ly9pLmltZ3VyLmNvbS9GSDlISkhoLmdpZicKICAgIF07CgogICAgZnVuY3Rpb24gc2V0SW5pdGlhbFByb2ZpbGUoKSB7CiAgICAgIG5hbWVFbC50ZXh0Q29udGVudCA9ICJ3b215IjsKICAgICAgZG9jdW1lbnQudGl0bGUgPSAiQHdvbXkiOwogICAgICAKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXBmcCcsIGB1cmwoJ2h0dHBzOi8vZmlsZS5nYXJkZW4vYVJIWHo4RV9UZ2xIVDk1Yy9wcmltby5wbmcnKWApOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJhbmRvbUJhY2tncm91bmQoKSB7CiAgICAgIGNvbnN0IHJhbmRvbUJnID0gYmFja2dyb3VuZEltYWdlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBiYWNrZ3JvdW5kSW1hZ2VzLmxlbmd0aCldOwogICAgICAKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWJnJywgYHVybCgnJHtyYW5kb21CZ30nKWApOwogICAgICAKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudEJhY2tncm91bmQnLCByYW5kb21CZyk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdExhbnlhcmQoKSB7CiAgICAgIGNvbnN0IHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoJ3dzczovL2xhbnlhcmQucmVzdC9zb2NrZXQnKTsKICAgICAgbGV0IGludGVydmFsOwoKICAgICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBldmVudCA9PiB7CiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBvcDogMSB9KSk7CiAgICAgICAgCiAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgb3A6IDIsCiAgICAgICAgICBkOiB7CiAgICAgICAgICAgIHN1YnNjcmliZV90b19pZHM6IFt1c2VySWRdCiAgICAgICAgICB9CiAgICAgICAgfSkpOwoKICAgICAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgb3A6IDEgfSkpOwogICAgICAgIH0sIDMwMDAwKTsKICAgICAgfSk7CgogICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCB7IHQsIGQgfSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CgogICAgICAgIGlmICh0ID09PSAnSU5JVF9TVEFURScgfHwgdCA9PT0gJ1BSRVNFTkNFX1VQREFURScpIHsKICAgICAgICAgIHVwZGF0ZVByb2ZpbGUoZCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHsKICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICBzZXRUaW1lb3V0KGluaXRMYW55YXJkLCA1MDAwKTsKICAgICAgfSk7CiAgICAgIAogICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdMYW55YXJkIFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUoZGF0YSkgewogICAgICBpZiAoZGF0YS5kaXNjb3JkX3VzZXI/LnVzZXJuYW1lKSB7CiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBkYXRhLmRpc2NvcmRfdXNlci51c2VybmFtZTsKICAgICAgICBuYW1lRWwudGV4dENvbnRlbnQgPSB1c2VybmFtZTsKICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBAJHt1c2VybmFtZX1gOwogICAgICB9CgogICAgICB1cGRhdGVBY3Rpdml0eShkYXRhLmFjdGl2aXRpZXM/LmZpbHRlcihhY3Rpdml0eSA9PiBhY3Rpdml0eS50eXBlICE9PSA0KSB8fCBbXSk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQWN0aXZpdHkoYWN0aXZpdGllcykgewogICAgICBhY3Rpdml0eUVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgCiAgICAgIGlmIChhY3Rpdml0aWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAKICAgICAgY29uc3QgYWN0aXZpdHkgPSBhY3Rpdml0aWVzWzBdOwogICAgICAKICAgICAgaWYgKGFjdGl2aXR5Lm5hbWUgPT09ICdTcG90aWZ5JyAmJiBhY3Rpdml0eS5hc3NldHMpIHsKICAgICAgICBjb25zdCB0cmFjayA9IGFjdGl2aXR5LmRldGFpbHMgfHwgJ1Vua25vd24gVHJhY2snOwogICAgICAgIGNvbnN0IGFydGlzdCA9IGFjdGl2aXR5LnN0YXRlIHx8ICdVbmtub3duIEFydGlzdCc7CiAgICAgICAgCiAgICAgICAgYWN0aXZpdHlFbC5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8ZGl2Pkxpc3RlbmluZyB0byA8c3Ryb25nPiR7dHJhY2t9PC9zdHJvbmc+PC9kaXY+CiAgICAgICAgICA8ZGl2PmJ5IDxzdHJvbmc+JHthcnRpc3R9PC9zdHJvbmc+PC9kaXY+CiAgICAgICAgYDsKICAgICAgICBhY3Rpdml0eUVsLmNsYXNzTmFtZSA9ICdhY3Rpdml0eSBzcG90aWZ5IHNob3cnOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAKICAgICAgaWYgKGFjdGl2aXR5Lm5hbWUpIHsKICAgICAgICBsZXQgdGV4dCA9IGA8ZGl2PiR7YWN0aXZpdHkubmFtZX08L2Rpdj5gOwogICAgICAgIAogICAgICAgIGlmIChhY3Rpdml0eS5kZXRhaWxzKSB7CiAgICAgICAgICB0ZXh0ICs9IGA8ZGl2PiR7YWN0aXZpdHkuZGV0YWlsc308L2Rpdj5gOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoYWN0aXZpdHkuc3RhdGUpIHsKICAgICAgICAgIHRleHQgKz0gYDxkaXY+JHthY3Rpdml0eS5zdGF0ZX08L2Rpdj5gOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBhY3Rpdml0eUVsLmlubmVySFRNTCA9IHRleHQ7CiAgICAgICAgYWN0aXZpdHlFbC5jbGFzc05hbWUgPSAnYWN0aXZpdHkgcGxheWluZyBzaG93JzsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICB9CiAgICByZXNpemUoKTsKICAgIGxldCByZXNpemVTY2hlZHVsZWQgPSBmYWxzZTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgICAgIGlmICghcmVzaXplU2NoZWR1bGVkKSB7CiAgICAgICAgcmVzaXplU2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4geyByZXNpemUoKTsgcmVzaXplU2NoZWR1bGVkID0gZmFsc2U7IH0pOwogICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBzbm93ID0gW107CiAgICBjb25zdCBzbm93Q291bnQgPSAxMDA7CiAgICBmdW5jdGlvbiBpbml0U25vdygpIHsKICAgICAgc25vdy5sZW5ndGggPSAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNub3dDb3VudDsgaSsrKSB7CiAgICAgICAgc25vdy5wdXNoKHsKICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGgsCiAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodCwKICAgICAgICAgIHI6IE1hdGgucmFuZG9tKCkgKiAxLjYgKyAwLjYsCiAgICAgICAgICB2OiBNYXRoLnJhbmRvbSgpICogMC41ICsgMC4zCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIGluaXRTbm93KCk7CgogICAgZnVuY3Rpb24gZHJhd1Nub3coKSB7CiAgICAgIGN0eC5zaGFkb3dDb2xvciA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNiknOwogICAgICBjdHguc2hhZG93Qmx1ciA9IDYgKiBTQ0FMRTsKICAgICAgZm9yIChjb25zdCBwIG9mIHNub3cpIHsKICAgICAgICBwLnkgKz0gcC52OwogICAgICAgIGlmIChwLnkgLSBwLnIgPiBjYW52YXMuaGVpZ2h0KSB7CiAgICAgICAgICBwLnkgPSAtcC5yOwogICAgICAgICAgcC54ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aDsKICAgICAgICB9CiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC44NTsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHguYXJjKHAueCwgcC55LCBwLnIgKiBTQ0FMRSwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgIGN0eC5maWxsKCk7CiAgICAgIH0KICAgICAgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOwogICAgfQoKICAgIGNvbnN0IG1heFRyYWlsID0gTWF0aC5yb3VuZCgxMDAgKiBTQ0FMRSk7CiAgICBjb25zdCBwb29sU2l6ZSA9IDEyMDsKICAgIGNvbnN0IHRyYWlsID0gbmV3IEFycmF5KHBvb2xTaXplKS5maWxsKDApLm1hcCgoKSA9PiAoeyB4OjAseTowLHI6MCxsaWZlOjAsZGVjYXk6MCx2eDowLHZ5OjAsc2NhbGU6MSB9KSk7CiAgICBsZXQgbmV4dElkeCA9IDA7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgICAgY29uc3QgcCA9IHRyYWlsW25leHRJZHgrKyAlIHBvb2xTaXplXTsKICAgICAgICBwLnggPSBlLmNsaWVudFg7CiAgICAgICAgcC55ID0gZS5jbGllbnRZOwogICAgICAgIHAuciA9IChNYXRoLnJhbmRvbSgpICogMS40ICsgMC42KSAqIFNDQUxFOwogICAgICAgIHAubGlmZSA9IDE7CiAgICAgICAgcC5kZWNheSA9IE1hdGgucmFuZG9tKCkgKiAwLjAzICsgMC4wMjsKICAgICAgICBwLnZ4ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMC42OwogICAgICAgIHAudnkgPSBNYXRoLnJhbmRvbSgpICogMC44ICsgMC4zOwogICAgICAgIHAuc2NhbGUgPSAxOwogICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlvbiBkcmF3VHJhaWwoKSB7CiAgICAgIGN0eC5zaGFkb3dDb2xvciA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuOCknOwogICAgICBjdHguc2hhZG93Qmx1ciA9IDYgKiBTQ0FMRTsKICAgICAgbGV0IGFjdGl2ZSA9IDA7CiAgICAgIGZvciAoY29uc3QgcCBvZiB0cmFpbCkgewogICAgICAgIGlmIChwLmxpZmUgPD0gMCkgY29udGludWU7CiAgICAgICAgYWN0aXZlKys7CiAgICAgICAgcC54ICs9IHAudng7CiAgICAgICAgcC55ICs9IHAudnk7CiAgICAgICAgcC52eSArPSAwLjAxOwogICAgICAgIHAubGlmZSAtPSBwLmRlY2F5OwogICAgICAgIHAuc2NhbGUgPSBNYXRoLm1heCgwLCBwLmxpZmUpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHAubGlmZTsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHguYXJjKHAueCwgcC55LCBwLnIgKiBwLnNjYWxlLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICBpZiAoYWN0aXZlID4gbWF4VHJhaWwpIGJyZWFrOwogICAgICB9CiAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb29wKCkgewogICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgIGRyYXdTbm93KCk7CiAgICAgIGRyYXdUcmFpbCgpOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7CiAgICB9CiAgICBsb29wKCk7CgogICAgY29uc3QgdGhlbWVUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWVUb2dnbGUnKTsKICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5OwogICAgCiAgICB0aGVtZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdsaWdodC10aGVtZScpOwogICAgICBjb25zdCBpc0xpZ2h0ID0gYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2xpZ2h0LXRoZW1lJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIGlzTGlnaHQgPyAnbGlnaHQnIDogJ2RhcmsnKTsKICAgIH0pOwogICAgCiAgICBjb25zdCBzYXZlZFRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7CiAgICBpZiAoc2F2ZWRUaGVtZSA9PT0gJ2xpZ2h0JykgewogICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2xpZ2h0LXRoZW1lJyk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlVmlzaXRvckNvdW50ZXIoKSB7CiAgICAgIGlmICh0eXBlb2YoU3RvcmFnZSkgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgbGV0IGNvdW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Zpc2l0b3JDb3VudCcpIHx8IDA7CiAgICAgICAgY291bnQgPSBwYXJzZUludChjb3VudCkgKyAxOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd2aXNpdG9yQ291bnQnLCBjb3VudCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zpc2l0b3JDb3VudCcpLnRleHRDb250ZW50ID0gY291bnQ7CiAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3JlYXRlQ3JhY2tFZmZlY3QoKSB7CiAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JhY2tPdmVybGF5Jyk7CiAgICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gJyc7CiAgICAgIG92ZXJsYXkuc3R5bGUub3BhY2l0eSA9ICcxJzsKICAgICAgCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTU7IGkrKykgewogICAgICAgIGNvbnN0IGNyYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY3JhY2suY2xhc3NOYW1lID0gJ2NyYWNrJzsKICAgICAgICAKICAgICAgICBjb25zdCB4ID0gTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgIGNvbnN0IHkgPSBNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgIAogICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yYW5kb20oKSAqIDEwMCArIDIwOwogICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgucmFuZG9tKCkgKiAzICsgMTsKICAgICAgICBjb25zdCByb3RhdGlvbiA9IE1hdGgucmFuZG9tKCkgKiAzNjA7CiAgICAgICAgCiAgICAgICAgY3JhY2suc3R5bGUubGVmdCA9IGAke3h9cHhgOwogICAgICAgIGNyYWNrLnN0eWxlLnRvcCA9IGAke3l9cHhgOwogICAgICAgIGNyYWNrLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgOwogICAgICAgIGNyYWNrLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7CiAgICAgICAgY3JhY2suc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3JvdGF0aW9ufWRlZylgOwogICAgICAgIAogICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoY3JhY2spOwogICAgICB9CiAgICAgIAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBvdmVybGF5LnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAxcyBlYXNlJzsKICAgICAgICBvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAnMCc7CiAgICAgICAgCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgb3ZlcmxheS5zdHlsZS50cmFuc2l0aW9uID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0sIDgwMCk7CiAgICB9CiAgICAKICAgIGNvbnN0IHByb2ZpbGVQaWMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZVBpY3R1cmUnKTsKICAgIHByb2ZpbGVQaWMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGNyZWF0ZUNyYWNrRWZmZWN0KCk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiBhZGRTZWFzb25hbERlY29yYXRpb25zKCkgewogICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIGNvbnN0IG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7CiAgICAgIGNvbnN0IGRheSA9IHRvZGF5LmdldERhdGUoKTsKICAgICAgCiAgICAgIGlmICgobW9udGggPT09IDEyICYmIGRheSA+PSAxKSB8fCAobW9udGggPT09IDEpIHx8IChtb250aCA9PT0gMiAmJiBkYXkgPD0gMjgpKSB7CiAgICAgICAgY3JlYXRlU25vd2ZsYWtlcygpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKChtb250aCA9PT0gMykgfHwgKG1vbnRoID09PSA0KSB8fCAobW9udGggPT09IDUgJiYgZGF5IDw9IDMxKSkgewogICAgICAgIGNyZWF0ZUZsb3dlcnMoKTsKICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVTbm93Zmxha2VzKCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMwOyBpKyspIHsKICAgICAgICBjb25zdCBzbm93Zmxha2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBzbm93Zmxha2UuY2xhc3NOYW1lID0gJ3NlYXNvbmFsLWRlY29yYXRpb24nOwogICAgICAgIHNub3dmbGFrZS5pbm5lckhUTUwgPSAn4p2EJzsKICAgICAgICBzbm93Zmxha2Uuc3R5bGUubGVmdCA9IE1hdGgucmFuZG9tKCkgKiAxMDAgKyAndncnOwogICAgICAgIHNub3dmbGFrZS5zdHlsZS5mb250U2l6ZSA9IChNYXRoLnJhbmRvbSgpICogMjAgKyAxMCkgKyAncHgnOwogICAgICAgIHNub3dmbGFrZS5zdHlsZS5hbmltYXRpb24gPSBgZmFsbCAke01hdGgucmFuZG9tKCkgKiAxMCArIDV9cyBsaW5lYXIgaW5maW5pdGVgOwogICAgICAgIHNub3dmbGFrZS5zdHlsZS5hbmltYXRpb25EZWxheSA9IE1hdGgucmFuZG9tKCkgKiA1ICsgJ3MnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc25vd2ZsYWtlKTsKICAgICAgfQogICAgICAKICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGAKICAgICAgICBAa2V5ZnJhbWVzIGZhbGwgewogICAgICAgICAgdG8geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwdmgpIHJvdGF0ZSgzNjBkZWcpOyB9CiAgICAgICAgfQogICAgICBgOwogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3JlYXRlRmxvd2VycygpIHsKICAgICAgY29uc3QgZmxvd2VycyA9IFsn8J+MuCcsICfwn4y6JywgJ/CfjLsnLCAn8J+MvCddOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHsKICAgICAgICBjb25zdCBmbG93ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBmbG93ZXIuY2xhc3NOYW1lID0gJ3NlYXNvbmFsLWRlY29yYXRpb24nOwogICAgICAgIGZsb3dlci50ZXh0Q29udGVudCA9IGZsb3dlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmxvd2Vycy5sZW5ndGgpXTsKICAgICAgICBmbG93ZXIuc3R5bGUubGVmdCA9IE1hdGgucmFuZG9tKCkgKiAxMDAgKyAndncnOwogICAgICAgIGZsb3dlci5zdHlsZS5mb250U2l6ZSA9IChNYXRoLnJhbmRvbSgpICogMjUgKyAxNSkgKyAncHgnOwogICAgICAgIGZsb3dlci5zdHlsZS5hbmltYXRpb24gPSBgZmxvYXQgJHtNYXRoLnJhbmRvbSgpICogMTUgKyAxMH1zIGxpbmVhciBpbmZpbml0ZWA7CiAgICAgICAgZmxvd2VyLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIDUgKyAncyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmbG93ZXIpOwogICAgICB9CiAgICAgIAogICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYAogICAgICAgIEBrZXlmcmFtZXMgZmxvYXQgewogICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwdmgpIHRyYW5zbGF0ZVgoMCk7IG9wYWNpdHk6IDA7IH0KICAgICAgICAgIDEwJSB7IG9wYWNpdHk6IDE7IH0KICAgICAgICAgIDkwJSB7IG9wYWNpdHk6IDE7IH0KICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwMHB4KSB0cmFuc2xhdGVYKCR7TWF0aC5yYW5kb20oKSA+IDAuNSA/ICctJyA6ICcnfSR7TWF0aC5yYW5kb20oKSAqIDEwMH1weCk7IG9wYWNpdHk6IDA7IH0KICAgICAgICB9CiAgICAgIGA7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfQoKICAgIGNvbnN0IHdhcm5pbmdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdPdmVybGF5Jyk7CiAgICBjb25zdCBjbG9zZVdhcm5pbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VXYXJuaW5nJyk7CiAgICAKICAgIGNsb3NlV2FybmluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgd2FybmluZ092ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0pOwogICAgCiAgICBsZXQgZGV2dG9vbHMgPSB7CiAgICAgIG9wZW46IGZhbHNlLAogICAgICBvcmllbnRhdGlvbjogbnVsbAogICAgfTsKICAgIAogICAgY29uc3QgdGhyZXNob2xkID0gMTYwOwogICAgCiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmICh3aW5kb3cub3V0ZXJIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQgPiB0aHJlc2hvbGQgfHwgCiAgICAgICAgICB3aW5kb3cub3V0ZXJXaWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoID4gdGhyZXNob2xkKSB7CiAgICAgICAgaWYgKCFkZXZ0b29scy5vcGVuKSB7CiAgICAgICAgICBkZXZ0b29scy5vcGVuID0gdHJ1ZTsKICAgICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGRldnRvb2xzLm9wZW4gPSBmYWxzZTsKICAgICAgfQogICAgfSwgNTAwKTsKICAgIAogICAgZnVuY3Rpb24gc2hvd1dhcm5pbmcoKSB7CiAgICAgIHdhcm5pbmdPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgIGNyZWF0ZUNyYWNrRWZmZWN0KCk7CiAgICB9CiAgICAKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICd1JykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdJJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZS5rZXkgPT09ICdGMTInKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgc2hvd1dhcm5pbmcoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgCiAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICdzJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdDJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdKJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIAogICAgICBpZiAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdLJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNob3dXYXJuaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LCB0cnVlKTsKICAgIAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbihlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgc2hvd1dhcm5pbmcoKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwgdHJ1ZSk7CgogICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBzZXRSYW5kb21CYWNrZ3JvdW5kKCk7CiAgICB9LCAzMDAwMDApOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICBzZXRJbml0aWFsUHJvZmlsZSgpOwogICAgICBpbml0TGFueWFyZCgpOwogICAgICB1cGRhdGVWaXNpdG9yQ291bnRlcigpOwogICAgICBhZGRTZWFzb25hbERlY29yYXRpb25zKCk7CiAgICAgIAogICAgICBzZXRSYW5kb21CYWNrZ3JvdW5kKCk7CiAgICB9KTsKCiAgICBjb25zdCBzdGFydFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGFydFNjcmVlbiIpOwogICAgY29uc3QgYmdNdXNpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJiZ011c2ljIik7CgogICAgc3RhcnRTY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICAgIHN0YXJ0U2NyZWVuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHN0YXJ0U2NyZWVuLnJlbW92ZSgpLCA3MDApOwoKICAgICAgYmdNdXNpYy52b2x1bWUgPSAwLjc1OwogICAgICBiZ011c2ljLnBsYXkoKS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9KTsKICA8L3NjcmlwdD4KCjwvYm9keT4KPC9odG1sPg=="))));</script>
